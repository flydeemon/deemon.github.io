---
title: React 开发中遇到的坑
date: 2017-03-12 20:08:45
tags: 
categories: react
---

# 警告：需要安装 prop-types package

这个是 React 的问题，最近官方更新 React 15.5.0 之后的版本都将弃用 React.PropTypes。
所以会提示让你安装 prop-types。详情去 React 官方的 release 查看。
如果你的项目中使用了第三方库，而那些库还没更新的情况下，最好的解决办法是：安装旧版本的 React 版本。
命令： npm install --save react@15.3.2 react-dom@15.3.2

如果你项目中并没有使用第三方库，那么就更新 React 版本并安装 prop-types 包。
命令： npm install --save react prop-types

```
//项目中需要引入 prop-types
import PropTypes from 'prop-types';

const propTypes: {
    myArray: PropTypes.array,
    myBool: PropTypes.bool,
    myFunc: PropTypes.func,
    myNumber: PropTypes.number,
    myString: PropTypes.string,
    requiredFunc: PropTypes.func.isRequired
}
```

# webpack2 无法自动刷新或报错的问题

这个其实是路径的问题。嘛，我来慢慢解释下吧。
首先，webpack-dev-server 运行的时候，会将编译好的文件存储在内存中，所以你运行这条命令的时候在项目中是找不到这个编译好的文件的。那么问题来了，index.html 中 script 标签是要引入这个编译好的文件的，那该怎么办？（这里我们把编译好的文件定义成: bundle.js）。
解决办法：
* 第一个办法是 index.html 中 script 标签直接从项目的根目录引入 bundle.js 。

	` <script src="bundle.js"></script> `

    这里有个前提，你的 index.html 必须在项目根目录下。比如 react_example -> index.html 。
* 第二个办法是在 webpack.config.js 文件中指定 bundle.js 放在哪里。
    path：指定编译打包的路径，不是 html 中的 js 引用。
    publicPath：在内存中的虚拟目录。html 中引用 js 文件时，必须引用此虚拟路径（但实际上引用的是内存中的文件）。
    module.exports.output 中添加 publicPath 属性，该属性指定 bundle.js 文件放在 react_example/assets/ 中。
    ```
    output: {
        path: __dirname + '/assets/',
        filename: 'bundle.js',
        publicPath: '/assets/'
    }
    ```
    然后修改index.html 中 script 标签

    `<script src="assets/bundle.js"></script>`

接下来，` webpack-dev-server --content-base src --hot --inline ` 报错的问题。
--content-base 参数是指：定义从哪个路径开始监听。后面的 src 如果不写默认就是 / ，也就是当前项目根目录下，如果你加了 src 就是 当前项目根目录下的 src 目录里。报错的原因就是这个，你的 index.html 是放在 src 中吗？
解决办法：
	先检查你的 index.html 是否放在 项目根目录下，如果不是，建议放在 项目根目录下。然后编写命令：
    ` webpack-dev-server --content-base --inline --hot `
    src 就不需要写了。默认从项目根目录开始监听。
